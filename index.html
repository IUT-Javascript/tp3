<!DOCTYPE html>

<html lang="en">

<head>
    <title>My awesome blog</title>
</head>

<body>
    <h1>My awesome blog</h1>

    <section>
        <h2>News form</h2>

        <form>
            <div id="errorForm"></div>
            <div>
                <label>Title</label><br/>
                <input type="text" name="titleToAdd" />
            </div>

            <div>
                <label>Description</label><br/>
                <textarea name="descriptionToAdd"></textarea>
            </div>

            <input type="submit" value="Submit" />
        </form>
    </section>

    <section>
        <h2>My news</h2>
        <h3></h3>

        <div id="newsList">
        </div>

        <button id="exportArticles">Exporter</button>
    </section>

    <script src="./src/constant.js"></script>

    <!-- en JS il est important dee dÃ©clarer les classes dans l'ordre d'utilisation -->
    <script src="./src/error/required-field-error.js"></script>
    <script src="./src/dto/article.js"></script>
    <script src="./src/view/article-html.js"></script>
    <script src="./src/service/article-service.js"></script>

    <script src="./src/html-article.js"></script>
    <script src="./src/form-article.js"></script>
    <script>
        const articleService = new ArticleService();
        articleService.loadArticlesFromJson(ARTICLES_JSON).then(articles => {
                articles.forEach(a => {
                    addArticleToHtml(a, '#newsList');
                });
                displayArticleCount();
            })
            .catch(error => {
                console.error(error);
            });

        for (i = 4; i <= 6; i++) {
            articleService.loadArticleFromApi(i).then(article => {
                    addArticleToHtml(article, '#newsList');
                    displayArticleCount();
                })
                .catch(error => {
                    console.error(error);
                });
        }

        const form = document.querySelector('form');
        form.addEventListener('submit', submitForm);

        const exportArticlesButton = document.querySelector('#exportArticles');
        exportArticlesButton.addEventListener('click', exportArticlesButtonClick);
    </script>
</body>

</html>